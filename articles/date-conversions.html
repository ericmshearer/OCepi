<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Date Conversions • OCepi</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.9/font.css" rel="stylesheet">
<link href="../deps/Source_Code_Pro-0.4.9/font.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Date Conversions">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">OCepi</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/calculations.html">Calculations</a></li>
    <li><a class="dropdown-item" href="../articles/data-cleaning.html">Data Cleaning</a></li>
    <li><a class="dropdown-item" href="../articles/date-conversions.html">Date Conversions</a></li>
    <li><a class="dropdown-item" href="../articles/extending-ggplot2.html">Extending ggplot2</a></li>
    <li><a class="dropdown-item" href="../articles/linking_data.html">Linking Data</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ericmshearer/OCepi" aria-label="GitHub"><span class="fa fa-github"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Date Conversions</h1>
            
      

      <div class="d-none name"><code>date-conversions.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="mmwr-conversions">MMWR Conversions<a class="anchor" aria-label="anchor" href="#mmwr-conversions"></a>
</h2>
<p>For most time series data, we prefer to aggregate at the week or year
level for reporting purposes. Like most epidemiologists, we rely on MMWR
disease week and year. For week, we have two flavors -
<code>mwwr_week</code> and <code>week_ending_date</code> (Saturday of
disease week). For year, we use <code>mmwr_year</code>.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dates</span> <span class="op">&lt;-</span> <span class="va">linelist</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">SpecimenDate</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">arrange</span><span class="op">(</span><span class="va">SpecimenDate</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span></span>
<span>    epi_year <span class="op">=</span> <span class="fu"><a href="../reference/mmwr_year.html">mmwr_year</a></span><span class="op">(</span><span class="va">SpecimenDate</span><span class="op">)</span>,</span>
<span>    disease_week <span class="op">=</span> <span class="fu"><a href="../reference/mmwr_week.html">mmwr_week</a></span><span class="op">(</span><span class="va">SpecimenDate</span><span class="op">)</span>,</span>
<span>    week_ending <span class="op">=</span> <span class="fu"><a href="../reference/week_ending_date.html">week_ending_date</a></span><span class="op">(</span><span class="va">SpecimenDate</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">dates</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 4</span></span></span>
<span><span class="co">#&gt;   SpecimenDate epi_year disease_week week_ending</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 2022-06-04       <span style="text-decoration: underline;">2</span>022           22 2022-06-04 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 2022-06-04       <span style="text-decoration: underline;">2</span>022           22 2022-06-04 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 2022-06-04       <span style="text-decoration: underline;">2</span>022           22 2022-06-04 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 2022-06-05       <span style="text-decoration: underline;">2</span>022           23 2022-06-11 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 2022-06-05       <span style="text-decoration: underline;">2</span>022           23 2022-06-11 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> 2022-06-06       <span style="text-decoration: underline;">2</span>022           23 2022-06-11</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="mmwrweek_to_date">mmwrweek_to_date()<a class="anchor" aria-label="anchor" href="#mmwrweek_to_date"></a>
</h2>
<p>For those that need to convert epidemiological year and week to week
ending date:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dates</span> <span class="op">&lt;-</span> <span class="va">dates</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">epi_year</span>, <span class="va">disease_week</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span></span>
<span>    week_ending <span class="op">=</span> <span class="fu"><a href="../reference/mmwrweek_to_date.html">mmwrweek_to_date</a></span><span class="op">(</span><span class="va">epi_year</span>, <span class="va">disease_week</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">dates</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 3</span></span></span>
<span><span class="co">#&gt;   epi_year disease_week week_ending</span></span>
<span><span class="co">#&gt;      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>     <span style="text-decoration: underline;">2</span>022           22 2022-06-04 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>     <span style="text-decoration: underline;">2</span>022           22 2022-06-04 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>     <span style="text-decoration: underline;">2</span>022           22 2022-06-04 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span>     <span style="text-decoration: underline;">2</span>022           23 2022-06-11 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span>     <span style="text-decoration: underline;">2</span>022           23 2022-06-11 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span>     <span style="text-decoration: underline;">2</span>022           23 2022-06-11</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="mmwr_calendar">mmwr_calendar()<a class="anchor" aria-label="anchor" href="#mmwr_calendar"></a>
</h2>
<p>To make <code><a href="../reference/mmwr_calendar.html">mmwr_calendar()</a></code> with total disease weeks +
start/end dates:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/mmwr_calendar.html">mmwr_calendar</a></span><span class="op">(</span><span class="fl">2023</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fl">20</span><span class="op">)</span></span>
<span><span class="co">#&gt;    Year Week      Start        End</span></span>
<span><span class="co">#&gt; 1  2023    1 2023-01-01 2023-01-07</span></span>
<span><span class="co">#&gt; 2  2023    2 2023-01-08 2023-01-14</span></span>
<span><span class="co">#&gt; 3  2023    3 2023-01-15 2023-01-21</span></span>
<span><span class="co">#&gt; 4  2023    4 2023-01-22 2023-01-28</span></span>
<span><span class="co">#&gt; 5  2023    5 2023-01-29 2023-02-04</span></span>
<span><span class="co">#&gt; 6  2023    6 2023-02-05 2023-02-11</span></span>
<span><span class="co">#&gt; 7  2023    7 2023-02-12 2023-02-18</span></span>
<span><span class="co">#&gt; 8  2023    8 2023-02-19 2023-02-25</span></span>
<span><span class="co">#&gt; 9  2023    9 2023-02-26 2023-03-04</span></span>
<span><span class="co">#&gt; 10 2023   10 2023-03-05 2023-03-11</span></span>
<span><span class="co">#&gt; 11 2023   11 2023-03-12 2023-03-18</span></span>
<span><span class="co">#&gt; 12 2023   12 2023-03-19 2023-03-25</span></span>
<span><span class="co">#&gt; 13 2023   13 2023-03-26 2023-04-01</span></span>
<span><span class="co">#&gt; 14 2023   14 2023-04-02 2023-04-08</span></span>
<span><span class="co">#&gt; 15 2023   15 2023-04-09 2023-04-15</span></span>
<span><span class="co">#&gt; 16 2023   16 2023-04-16 2023-04-22</span></span>
<span><span class="co">#&gt; 17 2023   17 2023-04-23 2023-04-29</span></span>
<span><span class="co">#&gt; 18 2023   18 2023-04-30 2023-05-06</span></span>
<span><span class="co">#&gt; 19 2023   19 2023-05-07 2023-05-13</span></span>
<span><span class="co">#&gt; 20 2023   20 2023-05-14 2023-05-20</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="assign_season">assign_season()<a class="anchor" aria-label="anchor" href="#assign_season"></a>
</h2>
<p>For epidemiologists working viral respiratory surveillance,
patients/laboratory results can also be categorized by season. Season in
this context spans week 40 of current year to week 39 of following
year.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>spec_date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2023-10-01"</span>,<span class="st">"2023-11-04"</span>,<span class="st">"2024-09-28"</span>,<span class="st">"2024-09-29"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">df</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>season <span class="op">=</span> <span class="fu"><a href="../reference/assign_season.html">assign_season</a></span><span class="op">(</span><span class="va">spec_date</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;    spec_date  season</span></span>
<span><span class="co">#&gt; 1 2023-10-01 2023-24</span></span>
<span><span class="co">#&gt; 2 2023-11-04 2023-24</span></span>
<span><span class="co">#&gt; 3 2024-09-28 2023-24</span></span>
<span><span class="co">#&gt; 4 2024-09-29 2024-25</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="to_month">to_month()<a class="anchor" aria-label="anchor" href="#to_month"></a>
</h2>
<p>An alternative to grouping cases at the year or week level is by
month. Returned output is a date formatted YYYY-MM-01.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>spec_date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2023-10-01"</span>,<span class="st">"2023-11-04"</span>,<span class="st">"2024-09-28"</span>,<span class="st">"2024-09-29"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">df</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>month <span class="op">=</span> <span class="fu"><a href="../reference/to_month.html">to_month</a></span><span class="op">(</span><span class="va">spec_date</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;    spec_date      month</span></span>
<span><span class="co">#&gt; 1 2023-10-01 2023-10-01</span></span>
<span><span class="co">#&gt; 2 2023-11-04 2023-11-01</span></span>
<span><span class="co">#&gt; 3 2024-09-28 2024-09-01</span></span>
<span><span class="co">#&gt; 4 2024-09-29 2024-09-01</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Eric Shearer.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
