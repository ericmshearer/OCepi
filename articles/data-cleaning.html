<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="OCepi">
<title>Data Cleaning • OCepi</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Data Cleaning">
<meta property="og:description" content="OCepi">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary" data-bs-theme="dark"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">OCepi</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/data-cleaning.html">Data Cleaning</a>
    <a class="dropdown-item" href="../articles/date-conversions.html">Date Conversions</a>
    <a class="dropdown-item" href="../articles/extending-ggplot2.html">Extending ggplot2</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/ericmshearer/OCepi">
    <span class="fa fa-github2"></span>
     
    github
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Data Cleaning</h1>
            
      
      
      <div class="d-none name"><code>data-cleaning.Rmd</code></div>
    </div>

    
    
<p>The functions in this package were designed to simplify and
standardize the most frequent recoding tasks. The examples below will
use simulated outbreak data:</p>
<pre><code><span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 10 × 6</span></span></span>
<span><span class="co">#&gt;    Ethnicity              Race       Gender   Age SexualOrientation SpecimenDate</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> Non-Hispanic or Latino Multiple … M         46 HET               2022-06-07  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> Unknown                Unknown    M          4 HET               2022-06-09  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> Non-Hispanic or Latino White      F         52 UNK               2022-06-07  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> Non-Hispanic or Latino White      F         77 UNK               2022-06-11  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> Unknown                American … M         71 HET               2022-06-10  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> Non-Hispanic or Latino Other      M         70 HET               2022-06-09  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> Non-Hispanic or Latino Black or … F         11 HET               2022-06-08  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> Non-Hispanic or Latino Black or … F          8 HET               2022-06-12  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> Hispanic or Latino     American … F         41 HET               2022-06-12  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> Non-Hispanic or Latino Black or … M         56 HET               2022-06-10</span></span></code></pre>
<div class="section level2">
<h2 id="recoding">Recoding<a class="anchor" aria-label="anchor" href="#recoding"></a>
</h2>
<div class="section level3">
<h3 id="core-functions">Core Functions:<a class="anchor" aria-label="anchor" href="#core-functions"></a>
</h3>
<ul>
<li>
<p><code>recode_race</code> - able to accept: ethnicity and race,
race only, LOINC codes (thank you Monterey for suggestion), and
‘Multi-race Status’ variable from VRBIS.</p>
<ul>
<li><p>Set <code>abbr_names</code> to TRUE to abbreviate long category
names i.e. “American Indian or Alaska Native” to “AI/AN”.</p></li>
<li><p>If using ethnicity and race, use order
<code>recode_race(ethnicity, race)</code>.</p></li>
</ul>
</li>
<li><p><code>recode_gender</code> - can be used with CalREDIE or VRBIS;
aims to use the most inclusive terms possible.</p></li>
<li><p><code>recode_orientation</code> - created specifically for
CalREDIE. Expects CTCIAdtlDemOrient variable.</p></li>
<li>
<p><code>age_groups</code> - has several presets for grouping
age:</p>
<ul>
<li>
<strong>cair2 peds</strong>: &lt;12 M, 12-15 M, 16-23 M, 24 M, 25-47
M, 4-6 Years, 6+ Years</li>
<li>
<strong>covid:</strong> 0-17, 18-24, 25-34, 35-44, 45-54, 55-64,
65-74, 75-84, 85+</li>
<li>
<strong>decade:</strong> 0-9, 10-19, 20-29, 30-39, 40-49, 50-59,
60-69, 70-79, 80+</li>
<li>
<strong>enteric:</strong> 0-4, 5-14, 15-24, 25-44, 45-64, 65+</li>
<li>
<strong>flu vax:</strong> 0-18, 19-49, 50-64, 65+</li>
<li>
<strong>hcv:</strong> 0-17, 18-39, 40-59, 60+</li>
<li>
<strong>infant:</strong> 0-2M, 3-4M, 5-6M, 7-8M, 9-10M, 11-12M</li>
<li>
<strong>mpox:</strong> 0-15, 16-24, 25-34, 35-44, 45-54, 55-64,
65+</li>
<li>
<strong>pertussis:</strong> &lt;1, 1-6, 7-10, 11-19, 20+</li>
<li>
<strong>school:</strong> 0-4, 5-11, 12-17, 18-64, 65+</li>
<li>
<strong>wnv:</strong> 0-17, 18-24, 25-34, 35-44, 45-54, 55-64,
65+</li>
</ul>
</li>
</ul>
<p>Example:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">linelist</span> <span class="op">&lt;-</span> <span class="va">linelist</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span></span>
<span>    Gender <span class="op">=</span> <span class="fu"><a href="../reference/recode_gender.html">recode_gender</a></span><span class="op">(</span><span class="va">Gender</span><span class="op">)</span>,</span>
<span>    race_ethnicity <span class="op">=</span> <span class="fu"><a href="../reference/recode_race.html">recode_race</a></span><span class="op">(</span><span class="va">Ethnicity</span>, <span class="va">Race</span>, abbr_names <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>    age_group <span class="op">=</span> <span class="fu"><a href="../reference/age_groups.html">age_groups</a></span><span class="op">(</span><span class="va">Age</span>, type <span class="op">=</span> <span class="st">"school"</span><span class="op">)</span>,</span>
<span>    SexualOrientation <span class="op">=</span> <span class="fu"><a href="../reference/recode_orientation.html">recode_orientation</a></span><span class="op">(</span><span class="va">SexualOrientation</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p>Frequency table with percentage using <code>add_percent</code> and
incidence rates using <code>rate_per_100k</code>:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">linelist</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">count</span><span class="op">(</span><span class="va">age_group</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span></span>
<span>    percent <span class="op">=</span> <span class="fu"><a href="../reference/add_percent.html">add_percent</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span>,</span>
<span>    rate <span class="op">=</span> <span class="fu">case_when</span><span class="op">(</span></span>
<span>      <span class="va">age_group</span> <span class="op">==</span> <span class="st">"0-4"</span> <span class="op">~</span> <span class="fu"><a href="../reference/rate_per_100k.html">rate_per_100k</a></span><span class="op">(</span><span class="va">n</span>, <span class="fl">100000</span>, digits <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>      <span class="va">age_group</span> <span class="op">==</span> <span class="st">"5-11"</span> <span class="op">~</span> <span class="fu"><a href="../reference/rate_per_100k.html">rate_per_100k</a></span><span class="op">(</span><span class="va">n</span>, <span class="fl">300000</span>, digits <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>      <span class="va">age_group</span> <span class="op">==</span> <span class="st">"12-17"</span> <span class="op">~</span> <span class="fu"><a href="../reference/rate_per_100k.html">rate_per_100k</a></span><span class="op">(</span><span class="va">n</span>, <span class="fl">500000</span>, digits <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>      <span class="va">age_group</span> <span class="op">==</span> <span class="st">"18-64"</span> <span class="op">~</span> <span class="fu"><a href="../reference/rate_per_100k.html">rate_per_100k</a></span><span class="op">(</span><span class="va">n</span>, <span class="fl">1000000</span>, digits <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>      <span class="va">age_group</span> <span class="op">==</span> <span class="st">"65+"</span> <span class="op">~</span> <span class="fu"><a href="../reference/rate_per_100k.html">rate_per_100k</a></span><span class="op">(</span><span class="va">n</span>, <span class="fl">2000000</span>, digits <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 5 × 4</span></span></span>
<span><span class="co">#&gt;   age_group     n percent  rate</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 0-4           5    4.76   5  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 5-11          9    8.57   3  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 12-17         8    7.62   1.6</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 18-64        54   51.4    5.4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 65+          29   27.6    1.4</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="addresses">Addresses<a class="anchor" aria-label="anchor" href="#addresses"></a>
</h3>
<p>Our best attempt to standardize and clean addresses is through
<code>clean_address</code>. This function will: convert characters to
title casing, recode abbreviated cardinal directions, and recode
abbreviated street endings (i.e. Street, Circle, Plaza). On occasion
there is a need to drop additional address data (i.e. Apartment, Unit),
which can be done using <code>keep_extra</code>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cases</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  Address <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"1234 Main Street Apt 204"</span>,<span class="st">"501 N Capital St"</span>,<span class="st">"233 W Green Plz Unit 3"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">cases</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span></span>
<span>    Address_clean <span class="op">=</span> <span class="fu"><a href="../reference/clean_address.html">clean_address</a></span><span class="op">(</span><span class="va">Address</span>, keep_extra <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span><span class="co">#&gt;                    Address                  Address_clean</span></span>
<span><span class="co">#&gt; 1 1234 Main Street Apt 204 1234 Main Street Apartment 204</span></span>
<span><span class="co">#&gt; 2         501 N Capital St       501 North Capital Street</span></span>
<span><span class="co">#&gt; 3   233 W Green Plz Unit 3    233 West Green Plaza Unit 3</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="phone-numbers">Phone Numbers<a class="anchor" aria-label="anchor" href="#phone-numbers"></a>
</h3>
<p>We also attempt to standardize phone number to a 10 digit U.S.
format. If after removing country code and symbols, and length is not 10
characters, returned value is NA.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cases</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  HomePhone <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"1-714-777-1234"</span>,<span class="st">"(949) 555-1234"</span>,<span class="st">"+442071539000"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">cases</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>HomePhone_clean <span class="op">=</span> <span class="fu"><a href="../reference/clean_phone.html">clean_phone</a></span><span class="op">(</span><span class="va">HomePhone</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;        HomePhone HomePhone_clean</span></span>
<span><span class="co">#&gt; 1 1-714-777-1234      7147771234</span></span>
<span><span class="co">#&gt; 2 (949) 555-1234      9495551234</span></span>
<span><span class="co">#&gt; 3  +442071539000            &lt;NA&gt;</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="census-tracts">Census Tracts<a class="anchor" aria-label="anchor" href="#census-tracts"></a>
</h3>
<p>Census tract across datasets are not always the same - some contain
state and county fips codes, some do not. To make them match, use
<code>recode_ctract</code> to remove state and county fips code.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/recode_ctract.html">recode_ctract</a></span><span class="op">(</span><span class="st">"06059099244"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "099244"</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="vrbis">VRBIS<a class="anchor" aria-label="anchor" href="#vrbis"></a>
</h3>
<p>Core functions:</p>
<ul>
<li>
<code>vrbis_manner_death</code> - expects “Manner of Death”
variable, follows CCDF data dictionary</li>
<li>
<code>vrbis_place_death</code> - expects “Place of Death
(Facility)”, follows CCDF data dictionary</li>
<li>
<code>vrbis_resident</code> - determine if death belongs to your
local health jurisdiction</li>
</ul>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/vrbis_manner_death.html">vrbis_manner_death</a></span><span class="op">(</span><span class="st">"A"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Accident"</span></span></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="../reference/vrbis_place_death.html">vrbis_place_death</a></span><span class="op">(</span><span class="fl">6</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "LTCF"</span></span></code></pre></div>
<p>To use <code>vrbis_resident</code>, you will need to know your county
fips code and CCDF county code (from appendix G). Returned output is 0/1
where 1 indicates death belongs to your county. For columns, you’ll need
(in order): “Place of Death (Facility)”, “County of Death (Code)”,
“Decedents County of Residence (NCHS Code)”. Next, plug in your fips
code to <code>fips</code> and CCDF county code to <code>county</code>
arguments.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="va">df</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span></span>
<span>    lhj_resident <span class="op">=</span> <span class="fu"><a href="../reference/vrbis_resident.html">vrbis_resident</a></span><span class="op">(</span></span>
<span>      <span class="va">place_of_death</span>,</span>
<span>      <span class="va">county_of_death_code</span>,</span>
<span>      <span class="va">decedents_county_of_residence_NCHS_Code</span>,</span>
<span>      fips <span class="op">=</span> <span class="st">"059"</span>,</span>
<span>      county <span class="op">=</span> <span class="st">"30"</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">lhj_resident</span> <span class="op">==</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="data-masking">Data Masking<a class="anchor" aria-label="anchor" href="#data-masking"></a>
</h2>
<div class="section level3">
<h3 id="suppression">Suppression<a class="anchor" aria-label="anchor" href="#suppression"></a>
</h3>
<p>Small cell sizes may need to be suppressed to protect patient
confidentiality prior to reporting. In this example, any cell sizes
<code>less_than</code> 10 will be suppressed and
<code>replace_with</code> double asterisk.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">linelist</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">count</span><span class="op">(</span><span class="va">age_group</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>n_suppress <span class="op">=</span> <span class="fu"><a href="../reference/suppress.html">suppress</a></span><span class="op">(</span><span class="va">n</span>, less_than <span class="op">=</span> <span class="fl">10</span>, replace_with <span class="op">=</span> <span class="st">"**"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 5 × 3</span></span></span>
<span><span class="co">#&gt;   age_group     n n_suppress</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 0-4           5 **        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 5-11          9 **        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 12-17         8 **        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 18-64        54 54        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 65+          29 29</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="redaction">Redaction<a class="anchor" aria-label="anchor" href="#redaction"></a>
</h3>
<p>Depending on unit/program policy, any mention of HIV or AIDS may need
to be removed from the dataset. While not yet exhaustive, this function
accounts for several variations of HIV and AIDS. If found, a warning
message is printed to the console.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>cause <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"cancer"</span>,<span class="st">"hepatitis"</span>,<span class="st">"COVID-19"</span>,<span class="st">"HIV"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span>
<span><span class="co">#&gt;       cause</span></span>
<span><span class="co">#&gt; 1    cancer</span></span>
<span><span class="co">#&gt; 2 hepatitis</span></span>
<span><span class="co">#&gt; 3  COVID-19</span></span>
<span><span class="co">#&gt; 4       HIV</span></span></code></pre></div>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/hiv_redact.html">hiv_redact</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning in hiv_redact(df): HIV/AIDS data detected.</span></span></code></pre></div>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span>
<span><span class="co">#&gt;       cause</span></span>
<span><span class="co">#&gt; 1    cancer</span></span>
<span><span class="co">#&gt; 2 hepatitis</span></span>
<span><span class="co">#&gt; 3  COVID-19</span></span>
<span><span class="co">#&gt; 4</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="cair2">CAIR2<a class="anchor" aria-label="anchor" href="#cair2"></a>
</h2>
<div class="section level3">
<h3 id="baby-name">Baby Name<a class="anchor" aria-label="anchor" href="#baby-name"></a>
</h3>
<p>Removes variants of baby/twin/newborn from first name. Addresses data
quality issue in birth hepatitis B doses.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/baby_name.html">baby_name</a></span><span class="op">(</span><span class="st">"baby BOY"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] NA</span></span></code></pre></div>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="../reference/baby_name.html">baby_name</a></span><span class="op">(</span><span class="st">"NEWBORN"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] NA</span></span></code></pre></div>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="../reference/baby_name.html">baby_name</a></span><span class="op">(</span><span class="st">"twin A"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] NA</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="data-management">Data Management<a class="anchor" aria-label="anchor" href="#data-management"></a>
</h2>
<div class="section level3">
<h3 id="data-frames">Data.frames<a class="anchor" aria-label="anchor" href="#data-frames"></a>
</h3>
<p><code>remove_empty_cols</code> drops all columns from data.frame that
are blank (represented by <code>NA</code> or ““)</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>a <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>,<span class="cn">NA</span>,<span class="cn">NA</span><span class="op">)</span>, b <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">""</span>,<span class="st">""</span>,<span class="st">""</span><span class="op">)</span>, c <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">3</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span>
<span><span class="co">#&gt;    a b c</span></span>
<span><span class="co">#&gt; 1 NA   1</span></span>
<span><span class="co">#&gt; 2 NA   2</span></span>
<span><span class="co">#&gt; 3 NA   3</span></span></code></pre></div>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/remove_empty_cols.html">remove_empty_cols</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span>
<span><span class="co">#&gt; 2 columns dropped.</span></span></code></pre></div>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span>
<span><span class="co">#&gt;   c</span></span>
<span><span class="co">#&gt; 1 1</span></span>
<span><span class="co">#&gt; 2 2</span></span>
<span><span class="co">#&gt; 3 3</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Eric Shearer.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
